<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memo Game - CESAG (Expanded)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .option-card {
            transition: background-color 0.3s, transform 0.2s;
        }
        .option-card:hover {
            transform: translateY(-5px);
        }
        .correct {
            background-color: #28a745 !important; /* Green */
            color: white;
        }
        .incorrect {
            background-color: #dc3545 !important; /* Red */
            color: white;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-3xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-2xl">
        <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-2">CESAG - Memo Game</h1>
        <p class="text-center text-gray-500 mb-6">Test your knowledge with questions from the exam and recent events.</p>

        <div id="question-area" class="mb-6">
            <div class="flex justify-between items-center mb-4">
                <div id="progress-text" class="text-sm font-medium text-gray-600">Question 1 / 25</div>
                <div id="score-text" class="text-lg font-bold text-indigo-600">Score: 0</div>
            </div>
            <div class="bg-gray-200 rounded-full h-2.5 w-full mb-4">
                <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full" style="width: 4%"></div>
            </div>
            <p id="question-text" class="text-lg md:text-xl font-semibold text-gray-700 min-h-[80px]"></p>
        </div>

        <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Options will be dynamically inserted here -->
        </div>

        <div id="feedback-area" class="mt-6 text-center">
             <button id="next-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300 w-full md:w-auto hidden">Next Question</button>
        </div>
        
        <div id="end-screen" class="text-center hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Quiz Complete!</h2>
            <p class="text-xl text-gray-600 mb-2">Your Final Score:</p>
            <p id="final-score" class="text-5xl font-extrabold text-indigo-600 mb-6"></p>
            <button id="restart-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-colors duration-300">Play Again</button>
        </div>
    </div>

    <script>
       const questions = [
            // Original Questions
            {
                question: "Je n'ai aucune envie de terminer ma vie dans un...",
                options: ["Auspice", "Hospisse", "Hospice", "Hauspice"],
                answer: 2
            },
            {
                question: "Parmi ces verbes à l'infinitif, l'un est mal orthographié. Lequel?",
                options: ["Mijoter", "Greloter", "Barboter", "Radoter"],
                answer: 1 
            },
            {
                question: "Laquelle de ces montagnes est appelée « toit du monde » ?",
                options: ["Kilimandjaro", "Mont Everest", "Mont Blanc", "Les Appalaches"],
                answer: 1
            },
            {
                question: "A quel(s) auteur(s) associe-t-on le concept de négritude?",
                options: ["Aimé Césaire", "Léopold Sédar Senghor", "Wole Soyinka", "Eza Boto"],
                answer: 0 
            },
            {
                question: "Qui est l'auteur de la citation suivante : « un tigre ne proclame pas sa tigritude. II bondit sur sa proie et la dévore »",
                options: ["Léopold Sédar Senghor", "Wole Soyinka", "Chinua Achebe", "Cheikh Anta Diop"],
                answer: 1
            },
             {
                question: "Dans le domaine du Web, GAFA signifie:",
                options: ["Google, Apple, Facebook, Amazon", "Groupement Amazon, Facebook, Apple", "Google Amérique, Facebook Amérique", "Aucune de ses réponses"],
                answer: 0
            },
            // Recent Events
            {
                question: "Quel pays a remporté la Coupe d'Afrique des Nations (CAN) de football en 2024?",
                options: ["Nigeria", "Côte d'Ivoire", "Sénégal", "Afrique du Sud"],
                answer: 1
            },
            {
                question: "Qui a été élu président du Sénégal lors de l'élection de mars 2024?",
                options: ["Macky Sall", "Amadou Ba", "Bassirou Diomaye Faye", "Ousmane Sonko"],
                answer: 2
            },
            {
                question: "En 2023, un coup d'État militaire a eu lieu dans quel pays du Sahel?",
                options: ["Mali", "Burkina Faso", "Tchad", "Niger"],
                answer: 3
            },
            {
                question: "Lequel de ces pays africains a officiellement rejoint le groupe des BRICS en janvier 2024?",
                options: ["Nigeria", "Kenya", "Éthiopie", "Ghana"],
                answer: 2
            },
            // New Questions from Document & General Knowledge
            {
                question: "A quel pays associe-t-on le mot lusophone ?",
                options: ["Portugal", "Espagne", "Lusophonia", "Brésil"],
                answer: 0
            },
            {
                question: "Dans le droit OHADA, GIE signifie:",
                options: ["Groupement d'Intérêt Economique", "Groupe d'Initiative Economique", "Groupement d'Intérêt Etatique", "Gestion Intégrée des Entreprises"],
                answer: 0
            },
            {
                question: "Qui est l'auteur du livre 'Une si longue lettre'?",
                options: ["Ahmadou Kourouma", "Mariama Bâ", "Cheikh Hamidou Kane", "Mongo Beti"],
                answer: 1
            },
            {
                question: "Qui a écrit 'L'Avare'?",
                options: ["Victor Hugo", "Emile Zola", "Molière", "William Shakespeare"],
                answer: 2
            },
            {
                question: "Un article coûte 200 000 F CFA. On lui applique une réduction de 20% puis une nouvelle réduction de 20%. Quel est son nouveau prix ?",
                options: ["120 000 F CFA", "128 000 F CFA", "140 000 F CFA", "160 000 F CFA"],
                answer: 1 // 200000 * 0.8 * 0.8 = 128000
            },
            {
                question: "Mon âge est égal au tien plus la moitié du mien. Si tu as 22 ans, quel âge ai-je ?",
                options: ["33 ans", "44 ans", "55 ans", "66 ans"],
                answer: 1 // x = 22 + x/2  => x/2 = 22 => x = 44
            },
            {
                question: "Quelle ville abrite le siège de la Cour Pénale Internationale (CPI)?",
                options: ["Genève", "New York", "Bruxelles", "La Haye"],
                answer: 3
            },
            {
    "question": "Parmi ces pays, lequel a officiellement mis fin à la présence militaire permanente française en juillet 2025 ?",
    "options": ["Mali", "Burkina Faso", "Sénégal", "Côte d'Ivoire"],
    "answer": 2
  },
  {
    "question": "Quel groupe terroriste affilié à Al‑Qaida a intensifié ses attaques en juin‑juillet 2025 dans le Sahel ?",
    "options": ["Boko Haram", "ISMIS‑W", "JNIM", "AQAP"],
    "answer": 2
  },
  {
    "question": "Quel accord de libre‑échange africain a connu une hausse de 12,4 % des échanges intra‑continentaux en 2024 ?",
    "options": ["Tripartite FTA", "AfCFTA", "ECOWAS Trade Pact", "SADC Protocol"],
    "answer": 1
  },
  {
    "question": "Quelle compétition sportive continentale masculine se tiendra en Angola en août 2025 ?",
    "options": ["CAN", "FIBA AfroBasket", "Afrique des Jeux", "Tour d’Afrique cycliste"],
    "answer": 1
  },
  {
    "question": "Quel pays a accueilli les Jeux africains (XIIIᵉ édition) entre mars et avril 2024, malgré leur nom de ‘2023’ ?",
    "options": ["Côte d'Ivoire", "Sénégal", "Ghana", "Nigéria"],
    "answer": 2
  },
  {
    "question": "Quel sommet africain sur le climat se tiendra à Addis‑Abeba en septembre 2025 ?",
    "options": ["ACS‑1", "ACS‑2", "COP28+, Afrique", "Lancaster Summit"],
    "answer": 1
  },
  {
    "question": "Quel président namibien est décédé en février 2024 et remplacé par son vice‑président ?",
    "options": ["Hage Geingob", "Nangolo Mbumba", "Netumbo Nandi‑Ndaitwah", "Sam Nujoma"],
    "answer": 0
  },
  {
    "question": "Quel pays a tenté un coup d’État à la fin de l’année 2023 (30 novembre‑1 décembre) ?",
    "options": ["Guinée‑Bissau", "Gabon", "Niger", "Tchad"],
    "answer": 0
  },
  {
    "question": "Le coup d’État de 2023 au Gabon a mis fin à combien d’années de règne familial ?",
    "options": ["46", "56", "36", "66"],
    "answer": 1
  },
  {
    "question": "Qui a remporté l’élection présidentielle au Gabon en avril 2025 avec environ 94,9 % des voix ?",
    "options": ["Ali Bongo Ondimba", "Alain Claude Bilie By Nze", "Brice Oligui Nguema", "Jean Ping"],
    "answer": 2
  },
  {
    "question": "Quel ancien président nigérien était encore détenu en mai‑juin 2025, malgré la libération d'autres officiels ?",
    "options": ["Mahamadou Issoufou", "Mahamane Sani Issoufou", "Mohamed Bazoum", "Abdoulaye Adamou"],
    "answer": 2
  },
  {
    "question": "Combien de pays africains commercent activement sous AfCFTA en 2024 ?",
    "options": ["49", "24", "16", "35"],
    "answer": 1
  },
  {
    "question": "Quel évènement féminin de 2025 a mis en lumière les défis du football féminin africain, tels que l’infrastructure ou le sponsoring ?",
    "options": ["Olympiades africaines", "WAFCON", "Tournoi des As FEMEN", "CAN féminine U‑20"],
    "answer": 1
  },
  {
    "question": "La première édition du Sommet africain du climat a eu lieu en septembre 2023 dans quelle ville ?",
    "options": ["Addis‑Abeba", "Nairobi", "Casablanca", "Kigali"],
    "answer": 1
  },
  {
    "question": "Quel pays est devenu membre des BRICS en janvier 2024 ?",
    "options": ["Afrique du Sud", "Égypte", "Éthiopie", "Kenya"],
    "answer": 2
  },
  {
    "question": "Quel pays africain a fait défaut sur sa dette souveraine en 2023, notamment un coupon de 33 M USD ?",
    "options": ["Ghana", "Éthiopie", "Zambie", "Zanzibar"],
    "answer": 1
  },
  {
    "question": "Dans quel pays l’initiative 'Giants of Africa Festival' rassemblant 320 participants en 2025 se tiendra‑t‑elle ?",
    "options": ["Kenya", "Nigéria", "Rwanda", "Afrique du Sud"],
    "answer": 2
  },
  {
    "question": "Quel pays (Burkina, Mali, Niger) a officiellement quitté la CEDEAO en 2025 pour former l’Alliance des États sahéliens ?",
    "options": ["Mali", "Burkina Faso", "Niger", "Toutes les trois"],
    "answer": 3
  },
  {
    "question": "Combien de mois avant mi‑2025 les trois pays ont‑ils quitté la CEDEAO ?",
    "options": ["2 mois", "6 mois", "12 mois", "18 mois"],
    "answer": 1
  },
  {
    "question": "Quel conflit sécuritaire a causé plus de 400 soldats tués dans le Sahel en mai‑juin 2025 ?",
    "options": ["Attaque Boko Haram", "Crise en Libye", "JNIM dans le Sahel", "Insurrection au Tchad"],
    "answer": 2
  },
  {
    "question": "Quel événement académique lié à l’éducation par l’IA a eu lieu au Ghana en 2024 ?",
    "options": ["AfricAIED 2024", "AI‑Tech Accra", "Brilla Hackathon", "SMART Schools AU"],
    "answer": 0
  },
  {
    "question": "Quel événement lié à la physique fondamentale s’est déroulé au Maroc en avril‑juillet 2024 ?",
    "options": ["ASP2024", "ICEP‑Africa", "FSP‑Maghreb", "African Physics Forum"],
    "answer": 0
  },
  {
    "question": "La junte du Niger a libéré plusieurs anciens responsables en 2025 — sauf lequel ?",
    "options": ["Mahamane Sani Issoufou", "Foumakoye Gado", "Mohamed Bazoum", "Plusieurs journalistes"],
    "answer": 2
  },
  {
    "question": "Quel pays a enregistré un record de 7 620 décès liés aux violences extrémistes au Sahel au premier semestre 2025 ?",
    "options": ["Tchad", "Burkina Faso", "Mali", "Niger"],
    "answer": 1
  },
  {
    "question": "Quel pays d’Afrique de l’Ouest a accueilli un sommet majeur sur le climat en 2023, adoptant la ‘Déclaration de Nairobi’ ?",
    "options": ["Kenya", "Éthiopie", "Rwanda", "Afrique du Sud"],
    "answer": 0
  },
  {
    "question": "Qui a dirigé le nouveau régime de transition au Gabon après le coup d’État d’août 2023 ?",
    "options": ["Ali Bongo", "Brice Oligui Nguema", "Alain Claude Bilie By Nze", "Jean Ping"],
    "answer": 1
  },
  {
    "question": "Quelle infrastructure militaire française a été remise aux autorités sénégalaises en juillet 2025 ?",
    "options": ["Camp Geille", "Base de Niamey", "Camp de Ouagadougou", "Base de Bamako"],
    "answer": 0
  },
  {
    "question": "Quel sport féminin africain a été particulièrement mis en lumière lors du WAFCON 2025 ?",
    "options": ["Athlétisme", "Football", "Rugby", "Basket-ball"],
    "answer": 1
  },
            {
                question: "Quel est l'anagramme de 6 lettres du mot « sieste » ?",
                options: ["Tisse", "Steise", "Essite", "Existe"],
                answer: 3
            },
            {
                question: "Complétez la suite logique : 12, 24, 72, 288, ...",
                options: ["576", "1152", "1440", "1728"],
                answer: 2 // x2, x3, x4, x5
            },
            {
                question: "Complétez la suite logique : 9, 7, 10, 8, 11, ...",
                options: ["9", "12", "13", "6"],
                answer: 0 // -2, +3, -2, +3, -2
            },
            {
                question: "Quel pays africain est le plus grand producteur de cacao au monde?",
                options: ["Ghana", "Nigeria", "Cameroun", "Côte d'Ivoire"],
                answer: 3
            },
            {
                question: "La Grande Muraille Verte est une initiative africaine visant à lutter contre quoi?",
                options: ["L'élévation du niveau de la mer", "La déforestation", "La désertification", "La pollution plastique"],
                answer: 2
            },
            {
                question: "Quel fleuve est le plus long d'Afrique de l'Ouest?",
                options: ["Le fleuve Sénégal", "Le fleuve Niger", "Le fleuve Gambie", "La Volta"],
                answer: 1
            },
            {
                question: "Laquelle de ces organisations est une union économique et monétaire en Afrique de l'Ouest?",
                options: ["CEDEAO", "UEMOA", "CEMAC", "SADC"],
                answer: 1
            },
            {
                question: "Quel célèbre musicien sénégalais est connu comme le 'Roi du Mbalax'?",
                options: ["Ismaël Lô", "Baaba Maal", "Orchestra Baobab", "Youssou N'Dour"],
                answer: 3
            }
        ];
        const numberOfQuestionsToSelect = 25;
const bestScoreKey = 'quizBestScore';
        // Function to get the current best score from local storage
function getBestScore() {
  const storedScore = localStorage.getItem(bestScoreKey);
  return storedScore ? parseInt(storedScore) : 0;
}

// Function to save the current score as the new best score if it's higher
function saveBestScore(currentScore) {
  const bestScore = getBestScore();
  if (currentScore > bestScore) {
    localStorage.setItem(bestScoreKey, currentScore);
    console.log(`New best score: ${currentScore}`);
  } else {
    console.log(`Your score: ${currentScore}. Best score is still: ${bestScore}`);
  }
}

// Function to select a random sample of questions without repetition
function selectRandomQuestions(questions, count) {
  const shuffledQuestions = [...questions].sort(() => 0.5 - Math.random()); // Shuffle the array
  return shuffledQuestions.slice(0, count); // Take the first 'count' elements
}

// Example usage:

// At the beginning of your quiz, select the questions
const selectedQuestions = selectRandomQuestions(allQuestions, numberOfQuestionsToSelect);
console.log("Selected Questions:", selectedQuestions);

// After the quiz is finished, get the user's final score (replace with your actual score)
const userFinalScore = 28;

// Save the score
saveBestScore(userFinalScore);

// You can also retrieve the best score at any time
const currentBestScore = getBestScore();
console.log("Current Best Score:", currentBestScore);
     // --- DOM Elements ---
const gameContainer = document.getElementById('game-container');
const questionText = document.getElementById('question-text');
const optionsContainer = document.getElementById('options-container');
const nextBtn = document.getElementById('next-btn');
const scoreText = document.getElementById('score-text');
const progressText = document.getElementById('progress-text');
const progressBar = document.getElementById('progress-bar');
const endScreen = document.getElementById('end-screen');
const finalScore = document.getElementById('final-score');
const restartBtn = document.getElementById('restart-btn');
const questionArea = document.getElementById('question-area');

// --- Game State ---
let currentQuestionIndex = 0;
let score = 0;
let answered = false;
let shuffledQuestions = [];

// --- Sound Effects ---
const correctSound = new Tone.Synth({
    oscillator: { type: 'triangle' },
    envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 }
}).toDestination();

const incorrectSound = new Tone.Synth({
    oscillator: { type: 'sawtooth' },
    envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 }
}).toDestination();

// --- Utility Functions ---
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// --- Game Functions ---
function startGame() {
    // Shuffle questions using Fisher-Yates algorithm for better randomization
    shuffledQuestions = shuffleArray(questions);
    currentQuestionIndex = 0;
    score = 0;
    answered = false;
    endScreen.classList.add('hidden');
    questionArea.classList.remove('hidden');
    optionsContainer.classList.remove('hidden');
    nextBtn.classList.add('hidden');
    updateScore();
    loadQuestion();
}

function loadQuestion() {
    answered = false;
    const currentQuestion = shuffledQuestions[currentQuestionIndex];
    questionText.textContent = currentQuestion.question;
    optionsContainer.innerHTML = '';

    // Shuffle the options while keeping track of the correct answer
    const shuffledOptions = shuffleArray(currentQuestion.options.map((option, index) => ({
        text: option,
        originalIndex: index
    })));
    
    // Find the new index of the correct answer after shuffling
    const newCorrectIndex = shuffledOptions.findIndex(option => 
        option.originalIndex === currentQuestion.answer
    );
    
    // Update the correct answer index for this shuffled question
    shuffledQuestions[currentQuestionIndex].shuffledAnswer = newCorrectIndex;

    shuffledOptions.forEach((option, index) => {
        const button = document.createElement('button');
        button.textContent = option.text;
        button.classList.add('option-card', 'w-full', 'p-4', 'border', 'border-gray-300', 'rounded-lg', 'text-left', 'bg-white', 'hover:bg-gray-50');
        button.dataset.index = index;
        button.addEventListener('click', selectAnswer);
        optionsContainer.appendChild(button);
    });

    updateProgress();
    nextBtn.classList.add('hidden');
}

function selectAnswer(e) {
    if (answered) return;
    answered = true;
    
    // Start audio context on user interaction
    Tone.start();

    const selectedOption = e.target;
    const selectedAnswerIndex = parseInt(selectedOption.dataset.index);
    const correctAnswerIndex = shuffledQuestions[currentQuestionIndex].shuffledAnswer;

    const options = optionsContainer.children;

    if (selectedAnswerIndex === correctAnswerIndex) {
        score++;
        selectedOption.classList.add('correct');
        correctSound.triggerAttackRelease('C5', '8n');
    } else {
        selectedOption.classList.add('incorrect');
        options[correctAnswerIndex].classList.add('correct');
        incorrectSound.triggerAttackRelease('C3', '8n');
    }
    
    // Disable all options
    for (let option of options) {
        option.disabled = true;
    }

    updateScore();
    nextBtn.classList.remove('hidden');
}

function updateScore() {
    scoreText.textContent = `Score: ${score}`;
}

function updateProgress() {
    progressText.textContent = `Question ${currentQuestionIndex + 1} / ${shuffledQuestions.length}`;
    const progressPercentage = ((currentQuestionIndex + 1) / shuffledQuestions.length) * 100;
    progressBar.style.width = `${progressPercentage}%`;
}

function handleNextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < shuffledQuestions.length) {
        loadQuestion();
    } else {
        showEndScreen();
    }
}

function showEndScreen() {
    questionArea.classList.add('hidden');
    optionsContainer.classList.add('hidden');
    nextBtn.classList.add('hidden');
    endScreen.classList.remove('hidden');
    finalScore.textContent = `${score} / ${shuffledQuestions.length}`;
}

// --- Event Listeners ---
nextBtn.addEventListener('click', handleNextQuestion);
restartBtn.addEventListener('click', startGame);

// --- Initialize Game ---
startGame();
    </script>
</body>
</html>
